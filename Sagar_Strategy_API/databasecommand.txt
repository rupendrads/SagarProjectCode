create database backtest

use backtest

CREATE TABLE strategy (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL,
  underlying VARCHAR(50) DEFAULT NULL,
  strategy_type VARCHAR(50) DEFAULT NULL,
  implied_futures_expiry VARCHAR(50) DEFAULT NULL,
  entry_time VARCHAR(50) DEFAULT NULL,
  last_entry_time VARCHAR(50) DEFAULT NULL,
  exit_time VARCHAR(50) DEFAULT NULL,
  square_off VARCHAR(50) DEFAULT NULL,
  overall_sl INT DEFAULT NULL,
  overall_target INT DEFAULT NULL,
  trailing_options VARCHAR(50) DEFAULT NULL,
  profit_reaches INT DEFAULT NULL,
  lock_profit INT DEFAULT NULL,
  increase_in_profit INT DEFAULT NULL,
  trail_profit INT DEFAULT NULL,
  PRIMARY KEY (id),
  UNIQUE KEY (name)
);

CREATE TABLE leg (
  id int NOT NULL AUTO_INCREMENT,
  strategy_id int DEFAULT NULL,
  leg_no int DEFAULT NULL,
  lots int DEFAULT NULL,
  position varchar(50) DEFAULT NULL,
  option_type varchar(50) DEFAULT NULL,
  expiry varchar(50) DEFAULT NULL,
  no_of_reentry int DEFAULT NULL,
  strike_selection_criteria varchar(50) DEFAULT NULL,
  closest_premium int DEFAULT NULL,
  strike_type varchar(50) DEFAULT NULL,
  straddle_width_value varchar(50) DEFAULT NULL,
  straddle_width_sign varchar(50) DEFAULT NULL,
  percent_of_atm_strike_value varchar(50) DEFAULT NULL,
  percent_of_atm_strike_sign varchar(50) DEFAULT NULL,
  atm_straddle_premium int DEFAULT NULL,
  strike_selection_criteria_stop_loss int DEFAULT NULL,
  strike_selection_criteria_stop_loss_sign varchar(50) DEFAULT NULL,
  strike_selection_criteria_trailing_options varchar(50) DEFAULT NULL,
  strike_selection_criteria_lock_profit int DEFAULT NULL,
  strike_selection_criteria_profit_reaches int DEFAULT NULL,
  strike_selection_criteria_lock_profit_sign varchar(50) DEFAULT NULL,
  strike_selection_criteria_increase_in_profit int DEFAULT NULL,
  strike_selection_criteria_trail_profit int DEFAULT NULL,
  strike_selection_criteria_trail_profit_sign varchar(50) DEFAULT NULL,
  roll_strike int DEFAULT NULL,
  roll_strike_strike_type varchar(50) DEFAULT NULL,
  roll_strike_stop_loss int DEFAULT NULL,
  roll_strike_stop_loss_sign varchar(50) DEFAULT NULL,
  roll_strike_trailing_options varchar(50) DEFAULT NULL,
  roll_strike_profit_reaches int DEFAULT NULL,
  roll_strike_lock_profit int DEFAULT NULL,
  roll_strike_lock_profit_sign varchar(50) DEFAULT NULL,
  roll_strike_increase_in_profit int DEFAULT NULL,
  roll_strike_trail_profit int DEFAULT NULL,
  roll_strike_trail_profit_sign varchar(50) DEFAULT NULL,
  simple_momentum_range_breakout varchar(50) DEFAULT NULL,
  simple_momentum int DEFAULT NULL,
  simple_momentum_sign varchar(50) DEFAULT NULL,
  simple_momentum_direction varchar(50) DEFAULT NULL,
  range_breakout varchar(50) DEFAULT NULL,
  PRIMARY KEY (id),
  KEY fk_strategy_id (strategy_id),
  CONSTRAINT fk_strategy_id FOREIGN KEY (strategy_id) REFERENCES strategy (id)
);

CREATE TABLE portfolio (
  id int NOT NULL AUTO_INCREMENT,
  name varchar(255) DEFAULT NULL,
  PRIMARY KEY (id),
  UNIQUE KEY Name (name)
)

CREATE TABLE portfoliostrategies (
  id int NOT NULL AUTO_INCREMENT,
  portfolio_id int DEFAULT NULL,
  strategy_id int DEFAULT NULL,
  symbol varchar(255) DEFAULT NULL,
  quantity_multiplier int DEFAULT NULL,
  monday tinyint(1) DEFAULT NULL,
  tuesday tinyint(1) DEFAULT NULL,
  wednesday tinyint(1) DEFAULT NULL,
  thrusday tinyint(1) DEFAULT NULL,
  friday tinyint(1) DEFAULT NULL,
  PRIMARY KEY (id),
  KEY portfolio_Id (portfolio_id),
  CONSTRAINT portfoliostrategies_ibfk_1 FOREIGN KEY (portfolio_id) REFERENCES portfolio (id)
)

CREATE TABLE portfoliostrategyvariables (
  id int NOT NULL AUTO_INCREMENT,
  portfolio_strategy_id int DEFAULT NULL,
  underlying varchar(255) DEFAULT NULL,
  strategy_type varchar(255) DEFAULT NULL,
  quantity_multiplier varchar(255) DEFAULT NULL,
  implied_futures_expiry varchar(255) DEFAULT NULL,
  entry_time varchar(255) DEFAULT NULL,
  last_entry_time varchar(255) DEFAULT NULL,
  exit_time varchar(255) DEFAULT NULL,
  square_off varchar(255) DEFAULT NULL,
  overall_sl int DEFAULT NULL,
  overall_target int DEFAULT NULL,
  trailing_options varchar(255) DEFAULT NULL,
  profit_reaches int DEFAULT NULL,
  lock_profit int DEFAULT NULL,
  increase_in_profit int DEFAULT NULL,
  trail_profit int DEFAULT NULL,
  PRIMARY KEY (id),
  KEY portfolio_strategy_id (portfolio_strategy_id),
  CONSTRAINT portfoliostrategyvariables_ibfk_1 FOREIGN KEY (portfolio_strategy_id) REFERENCES portfoliostrategies (id)
) 

CREATE TABLE portfoliostrategyvariableslegs (
  id int NOT NULL AUTO_INCREMENT,
  portfolio_strategy_variables_id int DEFAULT NULL,
  lots int DEFAULT NULL,
  position varchar(50) DEFAULT NULL,
  option_type varchar(50) DEFAULT NULL,
  expiry varchar(50) DEFAULT NULL,
  no_of_reentry int DEFAULT NULL,
  strike_selection_criteria varchar(50) DEFAULT NULL,
  closest_premium int DEFAULT NULL,
  strike_type varchar(50) DEFAULT NULL,
  straddle_width_value varchar(50) DEFAULT NULL,
  straddle_width_sign varchar(50) DEFAULT NULL,
  percent_of_atm_strike_value varchar(50) DEFAULT NULL,
  percent_of_atm_strike_sign varchar(50) DEFAULT NULL,
  atm_straddle_premium int DEFAULT NULL,
  strike_selection_criteria_stop_loss int DEFAULT NULL,
  strike_selection_criteria_stop_loss_sign varchar(50) DEFAULT NULL,
  strike_selection_criteria_trailing_options varchar(50) DEFAULT NULL,
  strike_selection_criteria_profit_reaches int DEFAULT NULL,
  strike_selection_criteria_lock_profit int DEFAULT NULL,
  strike_selection_criteria_lock_profit_sign varchar(50) DEFAULT NULL,
  strike_selection_criteria_increase_in_profit int DEFAULT NULL,
  strike_selection_criteria_trail_profit int DEFAULT NULL,
  strike_selection_criteria_trail_profit_sign varchar(50) DEFAULT NULL,
  roll_strike int DEFAULT NULL,
  roll_strike_strike_type varchar(50) DEFAULT NULL,
  roll_strike_stop_loss int DEFAULT NULL,
  roll_strike_stop_loss_sign varchar(50) DEFAULT NULL,
  roll_strike_trailing_options varchar(50) DEFAULT NULL,
  roll_strike_profit_reaches int DEFAULT NULL,
  roll_strike_lock_profit int DEFAULT NULL,
  roll_strike_lock_profit_sign varchar(50) DEFAULT NULL,
  roll_strike_increase_in_profit int DEFAULT NULL,
  roll_strike_trail_profit int DEFAULT NULL,
  roll_strike_trail_profit_sign varchar(50) DEFAULT NULL,
  simple_momentum_range_breakout varchar(50) DEFAULT NULL,
  simple_momentum int DEFAULT NULL,
  simple_momentum_sign varchar(50) DEFAULT NULL,
  simple_momentum_direction varchar(50) DEFAULT NULL,
  range_breakout varchar(50) DEFAULT NULL,
  PRIMARY KEY (id),
  KEY portfolio_strategy_variables_id (portfolio_strategy_variables_id),
  CONSTRAINT portfoliostrategyvariableslegs_ibfk_1 FOREIGN KEY (portfolio_strategy_variables_id) REFERENCES portfoliostrategyvariables (id)
) 